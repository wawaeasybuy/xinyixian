{"version":3,"sources":["../../../../client/app/account/login/login.controller.js"],"names":[],"mappings":"AAAA;;AAEA,QAAQ,MAAR,CAAe,cAAf,EACG,UADH,CACc,WADd,EAC2B,UAAU,MAAV,EAAkB,IAAlB,EAAwB,SAAxB,EAAkC,YAAlC,EAA+C,IAA/C,EAAqD;AAC5E,SAAO,IAAP,GAAc,EAAd,CAD4E;AAE5E,SAAO,MAAP,GAAgB,EAAhB,CAF4E;;AAI5E,OAAK,IAAL,GAAY,aAAa,IAAb,IAAqB,CAArB,CAJgE;;AAM5E,OAAK,MAAL,GAN4E;AAO5E,MAAG,KAAK,IAAL,IAAW,OAAX,EAAmB;AACpB,WAAO,UAAU,IAAV,CAAe,GAAf,CAAP,CADoB;GAAtB;;AAIA,SAAO,KAAP,GAAe,UAAS,IAAT,EAAe;AAC5B,WAAO,SAAP,GAAmB,IAAnB,CAD4B;;AAG5B,QAAG,KAAK,MAAL,EAAa;AACd,WAAK,KAAL,CAAW;AACT,eAAO,OAAO,IAAP,CAAY,KAAZ;AACP,kBAAU,OAAO,IAAP,CAAY,QAAZ;OAFZ,EAIC,IAJD,CAIO,YAAW;;AAEhB,aAAK,GAAL,CAAS,EAAT,EAAY,UAAU,IAAV,EAAe;AACzB,cAAG,KAAK,IAAL,IAAW,OAAX,EAAmB;AACpB,oBAAQ,GAAR,CAAY,iCAAZ,EADoB;AAEpB,sBAAU,IAAV,CAAe,qBAAf,EAFoB;WAAtB;SADU,CAAZ;;AAFgB,OAAX,CAJP,CAcC,KAdD,CAcQ,UAAS,GAAT,EAAc;AACpB,eAAO,MAAP,CAAc,KAAd,GAAsB,IAAI,OAAJ,CADF;OAAd,CAdR,CADc;KAAhB;GAHa,CAX6D;CAArD,CAD3B","file":"login.controller.js","sourcesContent":["'use strict';\n\nangular.module('xinyixianApp')\n  .controller('LoginCtrl', function ($scope, Auth, $location,$stateParams,User) {\n    $scope.user = {};\n    $scope.errors = {};\n\n    self.role = $stateParams.role || 0;\n\n    Auth.logout();\n    if(self.role!='admin'){\n      return $location.path('/');\n    }\n\n    $scope.login = function(form) {\n      $scope.submitted = true;\n\n      if(form.$valid) {\n        Auth.login({\n          email: $scope.user.email,\n          password: $scope.user.password\n        })\n        .then( function() {\n          // // Logged in, redirect to home\n          User.get({},function (data){\n            if(data.role==\"admin\"){\n              console.log(\"$location.path('article-view');\");\n              $location.path('/admin/article/view');\n            }\n          });\n          // \n        })\n        .catch( function(err) {\n          $scope.errors.other = err.message;\n        });\n      }\n    };\n\n  });\n"]}