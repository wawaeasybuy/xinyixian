{"version":3,"sources":["../../client/app/app.js"],"names":[],"mappings":";;AAEA,IAAI,UAAQ,uBAAR;AACJ,IAAI,mBAAiB,UAAQ,+BAAR;AACrB,IAAI,gBAAc,UAAQ,4BAAR;AAClB,IAAI,gBAAc,UAAQ,UAAR;AAClB,IAAI,MAAI,QAAQ,MAAR,CAAe,cAAf,EAA+B,CACrC,WADqC,EAErC,YAFqC,EAGrC,YAHqC,EAIrC,kBAJqC,EAKrC,WALqC,EAMrC,cANqC;;AAQrC,cARqC,CAA/B,EAUL,MAVK,CAUE,UAAU,cAAV,EAA0B,kBAA1B,EAA8C,iBAA9C,EAAiE,aAAjE,EAAgF;AACtF,qBACG,SADH,CACa,GADb,EADsF;;AAItF,oBAAkB,SAAlB,CAA4B,IAA5B,EAJsF;AAKtF,gBAAc,YAAd,CAA2B,IAA3B,CAAgC,iBAAhC,EALsF;CAAhF,CAVF,CAkBL,OAlBK,CAkBG,iBAlBH,EAkBsB,UAAU,UAAV,EAAsB,EAAtB,EAA0B,YAA1B,EAAwC,SAAxC,EAAmD;AAC7E,SAAO;;AAEL,aAAS,UAAU,MAAV,EAAkB;AACzB,aAAO,OAAP,GAAiB,OAAO,OAAP,IAAkB,EAAlB,CADQ;AAEzB,UAAI,aAAa,GAAb,CAAiB,OAAjB,CAAJ,EAA+B;AAC7B,eAAO,OAAP,CAAe,aAAf,GAA+B,YAAY,aAAa,GAAb,CAAiB,OAAjB,CAAZ,CADF;OAA/B;AAGA,aAAO,MAAP,CALyB;KAAlB;;;AAST,mBAAe,UAAS,QAAT,EAAmB;AAChC,UAAG,SAAS,MAAT,KAAoB,GAApB,EAAyB;AAC1B,kBAAU,IAAV,CAAe,QAAf;;AAD0B,oBAG1B,CAAa,MAAb,CAAoB,OAApB,EAH0B;AAI1B,eAAO,GAAG,MAAH,CAAU,QAAV,CAAP,CAJ0B;OAA5B,MAMK;AACH,eAAO,GAAG,MAAH,CAAU,QAAV,CAAP,CADG;OANL;KADa;GAXjB,CAD6E;CAAnD,CAlBtB,CA4CL,GA5CK,CA4CD,UAAU,UAAV,EAAsB,SAAtB,EAAiC,IAAjC,EAAsC,MAAtC,EAA8C;;AAEjD,aAAW,GAAX,CAAe,mBAAf,EAAoC,UAAU,KAAV,EAAiB,IAAjB,EAAuB;AACzD,SAAK,eAAL,CAAqB,UAAS,QAAT,EAAmB;;AAEtC,UAAG,CAAC,QAAD,EAAU;AACX,aAAK,KAAL,CAAW,EAAC,OAAM,qBAAN,EAA4B,UAAS,SAAT,EAAxC,EAA4D,YAAU,EAAV,CAA5D,CADW;OAAb;;AAFsC,KAAnB,CAArB,CADyD;GAAvB,CAApC,CAFiD;CAA9C,CA5CH;;AA2DJ,IAAI,MAAJ,CAAW,YAAX,EAAyB,CAAC,MAAD,EAAS,UAAU,IAAV,EAAgB;AAChD,SAAO,UAAU,IAAV,EAAgB;AACnB,WAAO,KAAK,WAAL,CAAiB,IAAjB,CAAP,CADmB;GAAhB,CADyC;CAAhB,CAAlC","file":"app.js","sourcesContent":["// 'use strict';\n//全局host根目录\nvar hostUrl=\"http://localhost:9000\";\nvar upload_image_url=hostUrl+\"/assets/upload/upload_images/\";\nvar lib_image_url=hostUrl+\"/assets/upload/images_lib/\";\nvar defalut_image=hostUrl+\"/assets/\";\nvar app=angular.module('xinyixianApp', [\n  'ngCookies',\n  'ngResource',\n  'ngSanitize',\n  'btford.socket-io',\n  'ui.router',\n  'ui.bootstrap',\n  // '720kb.datepicker',\n  'ngFileUpload'\n])\n  .config(function ($stateProvider, $urlRouterProvider, $locationProvider, $httpProvider) {\n    $urlRouterProvider\n      .otherwise('/');\n\n    $locationProvider.html5Mode(true);\n    $httpProvider.interceptors.push('authInterceptor');\n  })\n\n  .factory('authInterceptor', function ($rootScope, $q, $cookieStore, $location) {\n    return {\n      // Add authorization token to headers\n      request: function (config) {\n        config.headers = config.headers || {};\n        if ($cookieStore.get('token')) {\n          config.headers.Authorization = 'Bearer ' + $cookieStore.get('token');\n        }\n        return config;\n      },\n\n      // Intercept 401s and redirect you to login\n      responseError: function(response) {\n        if(response.status === 401) {\n          $location.path('/login');\n          // remove any stale tokens\n          $cookieStore.remove('token');\n          return $q.reject(response);\n        }\n        else {\n          return $q.reject(response);\n        }\n      }\n    };\n  })\n\n  .run(function ($rootScope, $location, Auth,$state) {\n    // Redirect to login if route requires auth and you're not logged in\n    $rootScope.$on('$stateChangeStart', function (event, next) {\n      Auth.isLoggedInAsync(function(loggedIn) {\n        //若没有登录，则使用游客身份登录\n        if(!loggedIn){\n          Auth.login({email:'tourist@tourist.com',password:'tourist'},function(){\n\n          });\n        }\n        // $location.path('/show/home/view');\n      });\n    });\n  });\n\napp.filter('to_trusted', ['$sce', function ($sce) {\n  return function (text) {\n      return $sce.trustAsHtml(text);\n  };\n}]);"]}